# SRFF (SR Flip-Flop) SR 正反器模組

本資料夾包含 SR 正反器的 VHDL 設計實作，提供基礎 NAND 實作版本與實際應用範例，適合數位邏輯學習與順序電路設計應用。

---

## 設計簡介

### 1. SR_byNAND.vhd（基礎 SR 正反器）

**檔案功能：** 使用 NAND 閘實作的 SR 正反器基礎電路

#### 設計特色
- **實作方式：** 交叉耦合 NAND 閘結構
- **輸入：**
  - `S` : Set 輸入（設定）
  - `R` : Reset 輸入（重置） 
  - `En` : Enable 輸入（致能控制）
- **輸出：**
  - `Q` : 正反器輸出狀態

#### 邏輯實作
```vhdl
Q_buf <= ((not S) nand En) nand Qn;
Qn <= ((not R) nand En) nand Q_buf;
Q <= Q_buf;
```

**電路特性：**
- **記憶功能：** 具備基本的 1-bit 狀態記憶能力
- **致能控制：** 透過 `En` 信號控制正反器的作用時機
- **非同步操作：** 輸入變化時立即反映到輸出
- **穩定狀態：** 當 S=0, R=0 時保持前一狀態

#### 適用情境
- **基礎教學：** 理解正反器的基本工作原理
- **電路分析：** 學習交叉耦合電路的穩定性
- **時序設計：** 作為更複雜時序電路的基礎組件
- **狀態機設計：** 實現簡單的二進制狀態控制

### 2. SR_application.vhd（SR 正反器應用）

**檔案功能：** 結合 SR 正反器與 BCD 計數器的完整應用範例

#### 設計特色
- **系統整合：** 將 SR 正反器與七段顯示器、計數器結合
- **輸入介面：**
  - `button[2]` : S 輸入，啟動馬達（LED 顯示）
  - `button[1]` : R 輸入，停止馬達（LED 顯示）
  - `button[0]` : 重置計數器為 00
  - `sw` : 總致能開關
- **輸出介面：**
  - `LED` : 馬達狀態指示（對應 Q 輸出）
  - `seg1, seg2` : 雙位數 BCD 計數器七段顯示

#### 功能邏輯
```vhdl
SR1: SR_byNAND port map(button(2), button(1), sw, Q);
```

**運作機制：**
- **馬達控制：** 按鈕 2 啟動，按鈕 1 停止，狀態由 LED 顯示
- **計數功能：** 每次馬達從停止轉為啟動時，BCD 計數器遞增
- **顯示系統：** 使用兩個七段顯示器顯示 00-99 的計數值
- **安全機制：** SW 開關可完全禁用所有按鈕功能

#### 適用情境
- **工業控制：** 馬達啟停控制與運轉次數記錄
- **教學實驗：** 展示 SR 正反器在實際系統中的應用
- **人機介面：** 按鈕輸入與七段顯示器輸出的典型範例
- **計數應用：** 事件觸發型計數器的實現方法

---

## 各自特色與用途比較

| 項目 | SR_byNAND.vhd | SR_application.vhd |
|------|---------------|-------------------|
| **複雜度** | 基礎元件 | 系統應用 |
| **學習重點** | 正反器原理 | 系統整合 |
| **適用階段** | 初學者 | 進階應用 |
| **擴展性** | 高度模組化 | 完整系統範例 |

### SR_byNAND.vhd 特色
- ✅ **純粹設計：** 專注於 SR 正反器核心邏輯
- ✅ **可重用性：** 可作為其他設計的基礎元件
- ✅ **教學友善：** 邏輯清晰，便於理解基本原理
- ✅ **硬體效率：** 最小化的閘數實現

### SR_application.vhd 特色  
- ✅ **實用導向：** 展示真實應用場景
- ✅ **系統完整性：** 包含輸入處理、邏輯運算、輸出顯示
- ✅ **功能豐富：** 整合計數、顯示、控制多種功能
- ✅ **工程實務：** 符合實際產品開發的設計模式

---

## 學習與使用建議

### 📚 學習建議

#### 初學者路徑
1. **理論基礎：** 先理解 SR 正反器的邏輯表與工作原理
2. **基礎實作：** 從 `SR_byNAND.vhd` 開始，理解 NAND 實現方式
3. **波形分析：** 使用模擬工具觀察不同輸入下的輸出波形
4. **系統應用：** 進階到 `SR_application.vhd` 學習系統整合

#### 進階學習方向
- **時序分析：** 分析建立時間（Setup Time）與保持時間（Hold Time）
- **競爭風險：** 理解同時輸入 S=1, R=1 時的不確定狀態
- **同步設計：** 學習將非同步 SR 正反器改為同步版本
- **狀態機應用：** 擴展到有限狀態機（FSM）設計

### 🔧 使用建議

#### 開發環境設置
- **模擬工具：** 建議使用 ModelSim 或 Vivado Simulator
- **硬體驗證：** 可在 FPGA 開發板上進行實際測試
- **除錯方法：** 利用 LED 指示與七段顯示器觀察狀態變化

#### 修改與擴展
- **計數範圍擴展：** 修改 BCD 計數器為更大範圍
- **輸入防彈跳：** 加入按鈕防彈跳電路提高穩定性
- **多狀態擴展：** 結合多個 SR 正反器實現多狀態控制
- **通訊介面：** 加入 UART 或 SPI 介面進行遠端控制

### ⚠️ 注意事項

#### 設計風險
- **競爭條件：** 避免同時對 S 和 R 輸入設定為作用狀態
- **時序違反：** 注意輸入信號的建立與保持時間要求
- **初始狀態：** 確保系統上電時的初始狀態定義明確

#### 最佳實務
- **信號命名：** 使用清晰的信號命名慣例
- **註解文件：** 為關鍵邏輯加入適當的註解說明
- **測試完整性：** 建立完整的測試案例涵蓋所有輸入組合

---

## 擴展應用方向

### 🔄 電路擴展
- **D 正反器：** 在 SR 正反器基礎上實現 D 正反器
- **JK 正反器：** 改進 SR 正反器避免不定態問題
- **觸發器陣列：** 組合多個正反器實現暫存器或移位暫存器

### 🎯 應用領域
- **記憶體設計：** 基礎記憶單元的實現
- **控制系統：** 數位控制器的狀態記憶元件
- **通訊系統：** 數據鎖存與同步應用
- **計時電路：** 頻率分割與時間計數應用

---

> **提示：** 建議先從基礎的 `SR_byNAND.vhd` 開始理解，再進階到 `SR_application.vhd` 的系統應用。搭配實際硬體驗證能獲得最佳的學習效果。